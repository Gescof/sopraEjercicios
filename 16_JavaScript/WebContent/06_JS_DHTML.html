
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<script type="text/javascript">

function documentWrite(){
    //Document.write es una finísima herramienta de relojero para actuar
    //sobre el arbol DOM con precisión milimétrica
    document.write("<h1>Document.write</h1>")
    document.write("<h2>Hola</h2>")
    document.write("<h2>que</h2>")
    document.write("<h2>tal</h2>")
}

function _innerHTML(){
    //innerHTML es una propiedad que poseen todos los nodos
    //del árbol que representan a una etiqueta que puede tener contenido

    //let div1 = document.getElementById("div1")
    div1.innerHTML = "<h2 align='center'>Contenido HTML generado dinámicamente</h2>"
}

function vaciarInnerHTML(){
    //document.getElementById("div1").innerHTML = ""
    div1.innerHTML = ""
}

function listarPeliculas(){
    let peliculas = [ 
        { titulo   : 'Alien',
          director : 'Ridley Scott',
          genero   : 'CiFi' },
        { titulo   : 'Die Hard',
          director : 'John McTiernan',
          genero   : 'Accion' },
        { titulo   : '2001',
          director : 'Stanley Kubrik',
          genero   : 'CiFi' },
        { titulo   : 'Don erre que erre',
          director : 'José Luis Sáenz de Heredia',
          genero   : 'Comedia' }
    ]
    return peliculas;    
}

function crearNodos(){

    let peliculas = listarPeliculas();

    let tabla = document.createElement("table")
    //Manera antigua de crear atributos:
    let atr = document.createAttribute("align")
    atr.value = "center"
    tabla.setAttributeNode(atr)
    //Manera actual:
    tabla.setAttribute("border", "1")

    let trCabecera = document.createElement("tr")
    let th1 = document.createElement("th")
    let th2 = document.createElement("th")
    let th3 = document.createElement("th")
    let txt1 = document.createTextNode("Título")
    let txt2 = document.createTextNode("Director")
    let txt3 = document.createTextNode("Género")

    th1.appendChild(txt1)
    th2.appendChild(txt2)
    th3.appendChild(txt3)
    trCabecera.appendChild(th1)
    trCabecera.appendChild(th2)
    trCabecera.appendChild(th3)
    tabla.appendChild(trCabecera)

    //Put your bloody code here
    for(let pelicula of peliculas){
        let tr = document.createElement("tr")
        let td1 = document.createElement("td")
        let td2 = document.createElement("td")
        let td3 = document.createElement("td")
        let txt4 = document.createTextNode(pelicula.titulo)
        let txt5 = document.createTextNode(pelicula.director)
        let txt6 = document.createTextNode(pelicula.genero)
        td1.appendChild(txt4)
        td2.appendChild(txt5)
        td3.appendChild(txt6)
        tr.appendChild(td1)
        tr.appendChild(td2)
        tr.appendChild(td3)
        tabla.appendChild(tr)
    }

    //Añadimos la tabla al div
    div2.innerHTML = ""
    div2.appendChild(tabla)

}

function crearNodos2(){

    let peliculas = listarPeliculas();

    let tabla = 
        "<table align='center' border='1'>"+
            "<tr>"+
                "<th>Título</th>"+
                "<th>Director</th>"+
                "<th>Género</th>"+
            "</tr>"
    for(let pelicula of peliculas){
        tabla = tabla +
            "<tr>"+
                "<td>"+pelicula.titulo+"</td>"+
                "<td>"+pelicula.director+"</td>"+
                "<td>"+pelicula.genero+"</td>"+
            "</tr>"
    }
    tabla = tabla+
        "</table>"

    div3.innerHTML = tabla
    console.log(tabla)

}

function vaciarSelect(){

    //Esto antiguamente no funcionaba (y con razón):
    //ciudades.innerHTML = ""

    //A cualquier nodo le podemos pedir que elimine a un hijo
    //nodoPadre.removeChild(nodoHijo)

    //Cualquier nodo sabe cual es su padre
    //let padre = nodo.parentNode
    //nodoHijo.parentNode.removeChild(nodoHijo)

    //Tambien tenemos la funcion remove
    //nodoABorrar.remove()
    let nodos = ciudades.childNodes
    let tam = nodos.length
    for(let a=0; a<tam; a++){
        let nodo = nodos[0]
        nodo.remove()
    }

    //Lo mismo con un while;
    /*
    let nodos = ciudades.childNodes
    while( nodos.length > 0 ){
        nodos[0].remove
    }
    */
}

//for( clave in window ){
//    console.log(clave+":"+window[clave])
//}

//Esto es la manera 100% JS de hacer el <body onload="">
window.onload = function(){
    console.log("===============================")
    btn_documentWrite.onclick   = documentWrite
    btn_innerHTML.onclick       = _innerHTML
    btn_vaciarInnerHTML.onclick = vaciarInnerHTML
    btn_crearNodos.onclick      = crearNodos
    btn_crearNodos2.onclick     = crearNodos2
    btn_vaciarSelect.onclick    = vaciarSelect
}

</script>

<body>

    <marquee>
        <h1>
            <font color="lightGreen">
                DHTML
            </font>
        </h1>
    </marquee>
    
    <hr/>
    
    <div align="center">
        <input type="button" id="btn_documentWrite"   value="Document.write"/>
        <input type="button" id="btn_innerHTML"       value="innerHTML"/>       
        <input type="button" id="btn_vaciarInnerHTML" value="Vaciar innerHTML"/>
        <input type="button" id="btn_crearNodos"      value="Crear nodos"/>      
        <input type="button" id="btn_crearNodos2"     value="Crear nodos 2"/>
        <input type="button" id="btn_vaciarSelect"    value="Vaciar select"/>
    </div>
    
    <hr/>
    
    <div id="div1"></div>
    
    <hr/>
    
    <div id="div2"></div>
    
    <hr/>

    <div id="div3"></div>
    
    <hr/>
    
    <div align="center">
        <select id="ciudades">
            <option value="Getafe">Getafe</option>
            <option value="Madrid">Madrid</option>
            <option value="Salamanca">Salamanca</option>
            <option value="Santa Pola">Santa Pola</option>
            <option value="Chinchón">Chinchón</option>
        </select>
    </div>

    <hr/>

    <div id="div5"></div>

</body>

</html>
